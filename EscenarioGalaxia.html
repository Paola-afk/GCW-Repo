<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modelos</title>
    <style>
body {
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    position: relative;
}

#icon-container {
    position: absolute;
    z-index: 10;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.menu-button {
    width: 60px;
    height: 60px;
    position: absolute;
    pointer-events: auto;
}

.hidden {
    display: none;
}

/* Estilos para cada botón en sus esquinas */
#escenario-1 {
    width: 200px; /* Hacer el botón de puntaje más largo */
    height: 60px; /* Mantener la altura */
    top: 25px;
    left: 50px;
}

#escenario-2 {
    width: 150px; /* Hacer el botón de puntaje más largo */
    height: 150px; /* Mantener la altura */
    bottom: 20px;
    left: 20px;
}

#escenario-3 {
    width: 150px; /* Hacer el botón de puntaje más largo */
    height: 150px; /* Mantener la altura */
    top: 20px;
    right: 20px;
}

/* #escenario-4 {
    bottom: 20px;
    right: 20px;
} */
    </style>
</head>
<body>
    <div id="icon-container">
        <img src="front/UI/Points.png" alt="Esc1" class="menu-button" id="escenario-1" />
        <img src="front/UI/Power.png" alt="Esc2" class="menu-button" id="escenario-2" />
        <a href="PauseMenu.html">
            <img src="front/UI/Pause_button.png" alt="Pause" class="menu-button" id="escenario-3" />
        </a>
        <!-- <img src="front/UI/Another_Button.png" alt="Esc4" class="menu-button" id="escenario-4" /> Nuevo botón en la esquina inferior derecha -->
    </div>

    <script type="module">
        import * as THREE from "./three.module.js";
        import { OrbitControls } from "./OrbitControls.js";
        import { GLTFLoader } from "./GLTFLoader.js";

        const scene = new THREE.Scene();
        scene.background = new THREE.Color("#34495E");

        const camera = new THREE.PerspectiveCamera(
            45,
            window.innerWidth / window.innerHeight
        );

        camera.position.set(0, 5, 20);

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        const hemisphereLight = new THREE.HemisphereLight(0xffffbb, 0x080820, 1);
        scene.add(hemisphereLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(1, 5, -1);
        scene.add(directionalLight);

        let catModel1; // Variable para almacenar el modelo del primer gato
        let catModel2; // Variable para almacenar el modelo del segundo gato

        // Cargar el modelo del primer gato
        const loaderGLTF = new GLTFLoader();
        loaderGLTF.load("/Modelos/Gatito-Grande.glb", function (model) {
            catModel1 = model.scene; // Almacenar el modelo
            catModel1.scale.set(0.7, 0.7, 0.7); // Aumenta la escala del gato
            catModel1.position.set(6, 2.5, 0);
            scene.add(catModel1);
        });

        // Cargar el modelo del segundo gato
        loaderGLTF.load("/Modelos/Gatito-Grande.glb", function (model) {
            catModel2 = model.scene; // Almacenar el modelo
            catModel2.scale.set(0.7, 0.7, 0.7); // Aumenta la escala del gato
            catModel2.position.set(-6, 2.5, 0); // Posición inicial del segundo gato
            scene.add(catModel2);
        });

        // Cargar el modelo del piso (Galaxy-PIA.glb)
        const loaderGalaxy = new GLTFLoader();
        loaderGalaxy.load("/Modelos/Galaxy-PIA.glb", function (model) {
            const galaxyModel = model.scene;
            galaxyModel.scale.set(5, 5, 5); // Ajusta la escala del modelo de la galaxia
            galaxyModel.position.set(0, -0.5, 0); // Ajusta la posición si es necesario
            scene.add(galaxyModel);
        });

        // Cargar el modelo de la lata
        const loaderCan = new GLTFLoader();
        loaderCan.load("/Modelos/Lata.glb", function (model) {
            const canModel = model.scene;
            canModel.scale.set(1, 1, 1); // Ajusta la escala de la lata
            canModel.position.set(0, 10, 5); // Posición de la lata en el mapa
            scene.add(canModel);
        });

        // Manejar el movimiento de los gatos con las teclas
        document.onkeydown = function (e) {
            if (!catModel1 || !catModel2) return; // Esperar a que ambos modelos estén cargados

            const moveSpeed = 0.1; // Ajusta la velocidad de movimiento
            switch (e.key) {
                case "w": // W - mover el primer gato hacia arriba
                    catModel1.position.z -= moveSpeed;
                    break;
                case "s": // S - mover el primer gato hacia abajo
                    catModel1.position.z += moveSpeed;
                    break;
                case "a": // A - mover el primer gato hacia la izquierda
                    catModel1.position.x -= moveSpeed;
                    break;
                case "d": // D - mover el primer gato hacia la derecha
                    catModel1.position.x += moveSpeed;
                    break;
                case "ArrowUp": // Flecha arriba - mover el segundo gato hacia arriba
                    catModel2.position.z -= moveSpeed;
                    break;
                case "ArrowDown": // Flecha abajo - mover el segundo gato hacia abajo
                    catModel2.position.z += moveSpeed;
                    break;
                case "ArrowLeft": // Flecha izquierda - mover el segundo gato hacia la izquierda
                    catModel2.position.x -= moveSpeed;
                    break;
                case "ArrowRight": // Flecha derecha - mover el segundo gato hacia la derecha
                    catModel2.position.x += moveSpeed;
                    break;
            }
        };

        let mixer;
        // const kazurka = new GLTFLoader();
        // kazurka.load("./kazurka/scene.gltf", function (model) {
        //     const obj = model.scene;
        //     obj.position.set(-6, 0, 0);
        //     scene.add(obj);

        //     mixer = new THREE.AnimationMixer(obj);
        //     const action = mixer.clipAction(model.animations[1]);
        //     action.play();
        // });

        const cameraControl = new OrbitControls(camera, renderer.domElement);

        function animate() {
            if (mixer) {
                mixer.update(0.01);
            }
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
